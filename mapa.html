<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeeMove - Interactive Map | Global Monitoring</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .map-page-header {
            background: linear-gradient(135deg, #fefdf8 0%, #f9f7f0 100%);
            padding: 100px 0 50px;
            text-align: center;
        }
        
        .map-page-content {
            min-height: 70vh;
            padding: 50px 0;
            background: #fefdf8;
        }
        
        .map-iframe-container {
            width: 100%;
            height: 600px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border: 2px solid #FFD700;
            margin: 30px 0;
        }
        
        .nasa-worldview-iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .map-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        
        .info-card {
            background: linear-gradient(135deg, #f9f7f0 0%, #f4f2e8 100%);
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #FFD700;
            text-align: center;
        }
        
        .info-card i {
            font-size: 2.5rem;
            color: #FFD700;
            margin-bottom: 15px;
        }
        
        .info-card h3 {
            color: #2c2c2c;
            margin-bottom: 10px;
        }
        
        .info-card p {
            color: #2c2c2c;
            opacity: 0.8;
        }
        
        .back-button {
            background: linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%);
            color: #FFD700;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
            text-decoration: none;
            display: inline-block;
        }
        
        .back-button:hover {
            background: linear-gradient(135deg, #FFD700 0%, #FFA000 100%);
            color: #2c2c2c;
            transform: scale(1.05);
        }
        
        .problem-section {
            background: linear-gradient(135deg, #f9f7f0 0%, #f4f2e8 100%);
            padding: 50px 0;
            margin: 30px 0;
            border-radius: 15px;
            border: 2px solid #FFD700;
        }
        
        .problem-text {
            color: #2c2c2c;
            font-size: 1.1rem;
            line-height: 1.8;
            max-width: 900px;
            margin: 0 auto;
            text-align: justify;
        }
        
        .problem-text h3 {
            color: #2c2c2c;
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.8rem;
        }
        
        .single-map-container {
            position: relative;
            width: 100%;
            max-width: 1200px;
            margin: 40px auto;
            border-radius: 15px;
            overflow: hidden;
            border: 3px solid #FFD700;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            height: 600px;
            cursor: grab;
            user-select: none;
        }
        
        .single-map-container:active {
            cursor: grabbing;
        }
        
        .map-content {
            position: absolute;
            width: 200%;
            height: 200%;
            top: -50%;
            left: -50%;
            transform-origin: center;
            transition: transform 0.3s ease;
        }
        
        .map-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        
        .map-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
        }
        
        .map-control-btn {
            width: 40px;
            height: 40px;
            background: rgba(255, 215, 0, 0.9);
            border: 2px solid #FFA000;
            border-radius: 8px;
            color: #2c2c2c;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .map-control-btn:hover {
            background: rgba(255, 215, 0, 1);
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4);
        }
        
        .map-control-btn:active {
            transform: scale(0.95);
        }
        
        .zoom-level {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(15, 20, 25, 0.9);
            color: #FFD700;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            border: 2px solid #FFD700;
            backdrop-filter: blur(10px);
            z-index: 1000;
        }
        
        .reset-view {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(255, 215, 0, 0.9);
            color: #2c2c2c;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            cursor: pointer;
            border: 2px solid #FFA000;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            z-index: 1000;
        }
        
        .reset-view:hover {
            background: rgba(255, 215, 0, 1);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4);
        }
        
        .map-emoji {
            position: absolute;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            background: rgba(255, 255, 255, 0.9);
            padding: 5px;
            border-radius: 50%;
            border: 2px solid transparent;
            pointer-events: auto;
            transform-origin: center;
        }
        
        .map-emoji:hover {
            transform: scale(1.2);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 20;
        }
        
        .alert-emoji {
            border-color: #dc3545;
        }
        
        .bee-emoji {
            border-color: #FFD700;
        }
        
        .bee-emoji:hover {
            background: rgba(255, 215, 0, 0.2);
        }
        
        .alert-emoji:hover {
            background: rgba(220, 53, 69, 0.1);
        }
        
        .content-section {
            margin-top: 40px;
            padding: 30px;
            background: linear-gradient(135deg, #f9f7f0 0%, #f4f2e8 100%);
            border-radius: 15px;
            border: 2px solid #FFD700;
            transition: all 0.5s ease;
        }
        
        .dashboard-container {
            display: none;
            animation: slideDown 0.5s ease-out;
        }
        
        .dashboard-container.show {
            display: block;
        }
        
        .text-content.hide {
            display: none;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Dashboard Styles for Map Page */
        .map-dashboard-container {
            background: rgba(26, 35, 50, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            border: 2px solid #FFD700;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            grid-template-rows: 1.3fr 1fr;
            gap: 15px;
            min-height: 320px;
            max-height: 500px;
            grid-template-areas: 
                "pollen pollen weather"
                "flowering rain weather";
        }
        
        .dashboard-panel {
            background: rgba(15, 20, 25, 0.8);
            border-radius: 12px;
            border: 1px solid rgba(255, 215, 0, 0.3);
            overflow: hidden;
        }
        
        .pollen-panel {
            grid-area: pollen;
        }
        
        .flowering-panel {
            grid-area: flowering;
        }
        
        .rain-panel {
            grid-area: rain;
        }
        
        .weather-panel {
            grid-area: weather;
        }
        
        .dashboard-header {
            background: rgba(255, 215, 0, 0.15);
            padding: 10px 15px;
            border-bottom: 1px solid rgba(255, 215, 0, 0.3);
        }
        
        .dashboard-header h3 {
            color: #FFD700;
            margin: 0;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .dashboard-header p {
            color: #ffffff;
            opacity: 0.8;
            margin: 5px 0 0 0;
            font-size: 0.85rem;
        }
        
        .chart-content {
            padding: 12px;
            height: 180px;
        }
        
        .chart-content.small {
            height: 130px;
        }
        
        .stats-bar {
            background: rgba(255, 215, 0, 0.1);
            padding: 10px 15px;
            display: flex;
            justify-content: space-around;
            gap: 10px;
            font-size: 0.85rem;
        }
        
        .stat-mini {
            text-align: center;
            flex: 1;
        }
        
        .stat-mini .label {
            color: #ffffff;
            opacity: 0.8;
            display: block;
            font-size: 0.75rem;
        }
        
        .stat-mini .value {
            color: #FFD700;
            font-weight: bold;
            font-size: 1rem;
        }
        
        .weather-mini {
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            margin: 3px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .weather-mini-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
        }
        
        .weather-mini-info {
            flex: 1;
        }
        
        .weather-mini-info h5 {
            color: #ffffff;
            margin: 0;
            font-size: 0.8rem;
            opacity: 0.9;
        }
        
        .weather-mini-info .main-val {
            color: #FFD700;
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        @media (max-width: 1024px) {
            .dashboard-grid {
                grid-template-columns: 1fr 1fr;
                grid-template-rows: 1.1fr 0.9fr 0.9fr;
                max-height: 420px;
                grid-template-areas: 
                    "pollen weather"
                    "flowering weather"
                    "rain weather";
            }
        }
        
        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto auto auto;
                max-height: none;
                grid-template-areas: 
                    "pollen"
                    "flowering"
                    "rain"
                    "weather";
                gap: 12px;
            }
            
            .chart-content {
                height: 180px;
            }
            
            .chart-content.small {
                height: 140px;
            }
        }
        
        .dashboard-placeholder {
            text-align: center;
            padding: 50px;
            color: #2c2c2c;
        }
        
        .dashboard-placeholder i {
            font-size: 4rem;
            color: #FFD700;
            margin-bottom: 20px;
        }
        
        .legend-container {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 15px;
            background: linear-gradient(135deg, #f9f7f0 0%, #f4f2e8 100%);
            border-radius: 20px;
            border: 2px solid #FFD700;
            font-weight: bold;
        }
        
        .legend-emoji {
            font-size: 1.5rem;
        }
        
        @media (max-width: 768px) {
            .map-page-header {
                padding: 80px 0 30px;
            }
            
            .single-map-container {
                margin: 20px auto;
                height: 400px;
            }
            
            .map-content {
                width: 250%;
                height: 250%;
                top: -75%;
                left: -75%;
            }
            
            .map-emoji {
                font-size: 1.5rem;
            }
            
            .legend-container {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }
            
            .map-controls {
                top: 10px;
                right: 10px;
                gap: 8px;
            }
            
            .map-control-btn {
                width: 35px;
                height: 35px;
                font-size: 1rem;
            }
            
            .zoom-level {
                bottom: 10px;
                right: 10px;
                padding: 6px 12px;
                font-size: 0.8rem;
            }
            
            .reset-view {
                bottom: 10px;
                left: 10px;
                padding: 6px 12px;
                font-size: 0.8rem;
            }
            
            .mobile-instruction {
                display: inline-block !important;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-drone"></i>
                    BeeMove
                </div>
                <nav>
                    <ul class="nav-links">
                        <li><a href="./index.html#solution">Solution</a></li>
                        <li><a href="./index.html#map">Global Map</a></li>
                        <li><a href="./index.html#video">Demo</a></li>
                        <li><a href="./index.html#team">Team</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Map Page Header -->
    <section class="map-page-header">
        <div class="container">
            <a href="./index.html" class="back-button">
                <i class="fas fa-arrow-left"></i>
                Back to Main Site
            </a>
            <h1 style="color: #2c2c2c; margin: 20px 0;">üåç BeeMove Interactive Map</h1>
            <p style="color: #2c2c2c; font-size: 1.2rem; max-width: 800px; margin: 0 auto;">
                Real-time monitoring of flowering phenology and integrated NASA satellite data
            </p>
        </div>
    </section>

    <!-- Map Content -->
    <section class="map-page-content">
        <div class="container">
            <!-- Map Title -->
            <div style="text-align: center; margin: 40px 0 20px;">
                <h2 style="color: #2c2c2c; margin-bottom: 15px;">ÔøΩÔ∏è BeeMove Global Monitoring Map</h2>
                <p style="color: #2c2c2c; opacity: 0.8;">Clique nos emojis de abelha para visualizar dados em tempo real</p>
                <div style="display: flex; justify-content: center; gap: 20px; margin-top: 15px; flex-wrap: wrap;">
                    <span style="background: rgba(255, 215, 0, 0.2); padding: 8px 15px; border-radius: 20px; font-size: 0.9rem; color: #2c2c2c;">
                        <i class="fas fa-mouse"></i> Arraste para navegar
                    </span>
                    <span style="background: rgba(255, 215, 0, 0.2); padding: 8px 15px; border-radius: 20px; font-size: 0.9rem; color: #2c2c2c;">
                        <i class="fas fa-search-plus"></i> Scroll para zoom
                    </span>
                    <span style="background: rgba(255, 215, 0, 0.2); padding: 8px 15px; border-radius: 20px; font-size: 0.9rem; color: #2c2c2c;">
                        <i class="fas fa-home"></i> Reset para centralizar
                    </span>
                    <span style="background: rgba(255, 215, 0, 0.2); padding: 8px 15px; border-radius: 20px; font-size: 0.9rem; color: #2c2c2c; display: none;" class="mobile-instruction">
                        <i class="fas fa-hand-point-up"></i> Duplo toque para zoom
                    </span>
                </div>
            </div>

            <!-- Single Map with Emojis -->
            <div class="single-map-container" id="mapContainer">
                <!-- Map Content (Image + Emojis as one unit) -->
                <div class="map-content" id="mapContent">
                    <img src="./imagens/mapa.jpg" alt="Mapa Global BeeMove" class="map-image" id="mapImage">
                    
                    <!-- Alert Emojis (positioned across different regions) -->
                    <div class="map-emoji alert-emoji" style="top: 25%; left: 15%;" title="Area with low pollination">‚ö†Ô∏è</div>
                    <div class="map-emoji alert-emoji" style="top: 40%; left: 70%;" title="Critical pollination zone">‚ö†Ô∏è</div>
                    <div class="map-emoji alert-emoji" style="top: 60%; left: 25%;" title="Region with pollen deficit">‚ö†Ô∏è</div>
                    
                    <!-- Bee Emojis (positioned in different regions) -->
                    <div class="map-emoji bee-emoji" style="top: 30%; left: 45%;" onclick="event.stopPropagation(); toggleDashboard('station-1')" title="BeeMove Station SP-001 - S√£o Paulo" data-station="SP-001">üêù</div>
                    <div class="map-emoji bee-emoji" style="top: 50%; left: 60%;" onclick="event.stopPropagation(); toggleDashboard('station-2')" title="BeeMove Station RJ-002 - Rio de Janeiro" data-station="RJ-002">üêù</div>
                    <div class="map-emoji bee-emoji" style="top: 70%; left: 40%;" onclick="event.stopPropagation(); toggleDashboard('station-3')" title="BeeMove Station MG-003 - Minas Gerais" data-station="MG-003">üêù</div>
                </div>
                
                <!-- Map Controls -->
                <div class="map-controls">
                    <button class="map-control-btn" onclick="zoomIn()" title="Zoom In">
                        <i class="fas fa-plus"></i>
                    </button>
                    <button class="map-control-btn" onclick="zoomOut()" title="Zoom Out">
                        <i class="fas fa-minus"></i>
                    </button>
                </div>
                
                <!-- Zoom Level Indicator -->
                <div class="zoom-level" id="zoomLevel">Zoom: 100%</div>
                
                <!-- Reset View Button -->
                <div class="reset-view" onclick="resetView()" title="Reset View">
                    <i class="fas fa-home"></i> Reset View
                </div>
            </div>

            <!-- Legend -->
            <div class="legend-container">
                <div class="legend-item">
                    <span class="legend-emoji">‚ö†Ô∏è</span>
                    <span>Areas with Low Pollination</span>
                </div>
                <div class="legend-item">
                    <span class="legend-emoji">üêù</span>
                    <span>Active BeeMove Stations (Clickable)</span>
                </div>
            </div>

            <!-- Content Section (Text or Dashboard) -->
            <div class="content-section">
                <!-- Text Content (Default) -->
                <div id="textContent" class="text-content">
                    <h3 style="color: #2c2c2c; text-align: center; margin-bottom: 25px;">ÔøΩ O Problema Cr√≠tico da Baixa Poliniza√ß√£o</h3>
                    
                    <p style="color: #2c2c2c; font-size: 1.1rem; line-height: 1.8; text-align: justify; margin-bottom: 20px;">
                        <strong>Low flowering and pollination represents one of the greatest environmental and economic threats of our time.</strong> 
                        The decline in pollinator populations, especially bees, has caused devastating impacts on a global scale, 
                        directly affecting food production, biodiversity, and the world economy.
                    </p>
                    
                    <p style="color: #2c2c2c; font-size: 1.1rem; line-height: 1.8; text-align: justify; margin-bottom: 20px;">
                        <strong>üí∞ Economic Impacts:</strong> The economic value of pollination is estimated at more than $200 billion annually globally. 
                        The loss of pollinators causes drastic drops in agricultural productivity, bankruptcy of rural producers, 
                        unemployment in the agricultural sector, and instability in food commodity markets.
                    </p>
                    
                    <p style="color: #2c2c2c; font-size: 1.1rem; line-height: 1.8; text-align: justify; margin-bottom: 20px;">
                        <strong>üë• Social Impacts:</strong> More than 35% of global food production depends on pollination. 
                        The reduction of this ecosystem service results in food insecurity, increased food prices, 
                        and threats to the nutrition of billions of people, especially in vulnerable communities.
                    </p>
                    
                    <p style="color: #2c2c2c; font-size: 1.1rem; line-height: 1.8; text-align: justify; margin-bottom: 0;">
                        <strong>üî¨ The BeeMove Solution:</strong> Our technology uses NASA satellite data and autonomous drones 
                        to map areas of low flowering, detect pollination gaps, and implement precise solutions 
                        for pollen redistribution, restoring ecological balance and ensuring food security.
                    </p>
                </div>

                <!-- Dashboard Container (Hidden by default) -->
                <div id="dashboardContainer" class="dashboard-container">
                    <div class="map-dashboard-container">
                        <div style="text-align: center; margin-bottom: 20px;">
                            <h2 style="color: #FFD700; margin: 0 0 5px 0;">üìä BeeMove Dashboard - Selected Station</h2>
                            <p style="color: #ffffff; opacity: 0.8; margin: 0;">Real-time data from the last 15 days</p>
                        </div>
                        
                        <div class="dashboard-grid">
                            <!-- Concentra√ß√£o de P√≥len - Ocupa toda a parte superior -->
                            <div class="dashboard-panel pollen-panel">
                                <div class="dashboard-header">
                                    <h3><i class="fas fa-seedling"></i> Pollen Concentration</h3>
                                    <p>Daily variation (grains/m¬≥)</p>
                                </div>
                                <div class="chart-content">
                                    <canvas id="mapPollenChart"></canvas>
                                </div>
                                <div class="stats-bar">
                                    <div class="stat-mini">
                                        <span class="label">Average</span>
                                        <span class="value" id="mapPollenAvg">0</span>
                                    </div>
                                    <div class="stat-mini">
                                        <span class="label">Maximum</span>
                                        <span class="value" id="mapPollenMax">0</span>
                                    </div>
                                    <div class="stat-mini">
                                        <span class="label">Status</span>
                                        <span class="value" id="mapPollenStatus">Normal</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- N√≠veis de Flora√ß√£o - Inferior esquerda -->
                            <div class="dashboard-panel flowering-panel">
                                <div class="dashboard-header">
                                    <h3><i class="fas fa-flower"></i> Flowering Levels</h3>
                                    <p>Intensity (%)</p>
                                </div>
                                <div class="chart-content small">
                                    <canvas id="mapFloweringChart"></canvas>
                                </div>
                            </div>
                            
                            <!-- √çndice Pluviom√©trico - Centro inferior -->
                            <div class="dashboard-panel rain-panel">
                                <div class="dashboard-header">
                                    <h3><i class="fas fa-cloud-rain"></i> Precipitation Index</h3>
                                    <p>Precipitation (mm)</p>
                                </div>
                                <div class="chart-content small">
                                    <canvas id="mapRainChart"></canvas>
                                </div>
                                <div class="stats-bar">
                                    <div class="stat-mini">
                                        <span class="label">Total</span>
                                        <span class="value" id="mapRainTotal">0mm</span>
                                    </div>
                                    <div class="stat-mini">
                                        <span class="label">Average</span>
                                        <span class="value" id="mapRainAvg">0mm</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Dados Meteorol√≥gicos - Lado direito (ocupa toda altura) -->
                            <div class="dashboard-panel weather-panel">
                                <div class="dashboard-header">
                                    <h3><i class="fas fa-thermometer-half"></i> Meteorological Data</h3>
                                    <p>Period averages (15 days)</p>
                                </div>
                                <div style="padding: 12px;">
                                    <div class="weather-mini">
                                        <div class="weather-mini-icon" style="background: linear-gradient(135deg, #ff6b6b, #ff8e53);">
                                            <i class="fas fa-temperature-high" style="color: white;"></i>
                                        </div>
                                        <div class="weather-mini-info">
                                            <h5>Temperature</h5>
                                            <div class="main-val" id="mapTemp">24.5¬∞C</div>
                                        </div>
                                    </div>
                                    
                                    <div class="weather-mini">
                                        <div class="weather-mini-icon" style="background: linear-gradient(135deg, #4ecdc4, #44a08d);">
                                            <i class="fas fa-tint" style="color: white;"></i>
                                        </div>
                                        <div class="weather-mini-info">
                                            <h5>Humidity</h5>
                                            <div class="main-val" id="mapHumidity">68%</div>
                                        </div>
                                    </div>
                                    
                                    <div class="weather-mini">
                                        <div class="weather-mini-icon" style="background: linear-gradient(135deg, #a8edea, #fed6e3);">
                                            <i class="fas fa-wind" style="color: #333;"></i>
                                        </div>
                                        <div class="weather-mini-info">
                                            <h5>Wind</h5>
                                            <div class="main-val" id="mapWind">12.8 km/h</div>
                                        </div>
                                    </div>
                                    
                                    <div class="weather-mini">
                                        <div class="weather-mini-icon" style="background: linear-gradient(135deg, #d299c2, #fef9d7);">
                                            <i class="fas fa-weight" style="color: #333;"></i>
                                        </div>
                                        <div class="weather-mini-info">
                                            <h5>Pressure</h5>
                                            <div class="main-val" id="mapPressure">1013.2 hPa</div>
                                        </div>
                                    </div>
                                    
                                    <div class="weather-mini">
                                        <div class="weather-mini-icon" style="background: linear-gradient(135deg, #FFD700, #FFA500);">
                                            <i class="fas fa-sun" style="color: #333;"></i>
                                        </div>
                                        <div class="weather-mini-info">
                                            <h5>UV Index</h5>
                                            <div class="main-val" id="mapUV">7.2</div>
                                        </div>
                                    </div>
                                    
                                    <div class="weather-mini">
                                        <div class="weather-mini-icon" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                                            <i class="fas fa-eye" style="color: white;"></i>
                                        </div>
                                        <div class="weather-mini-info">
                                            <h5>Visibility</h5>
                                            <div class="main-val" id="mapVisibility">15.4 km</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 40px;">
                <p style="color: #2c2c2c; opacity: 0.7;">
                    <i class="fas fa-satellite"></i>
                    <strong>Technology:</strong> Integrated system with NASA EOSDIS data and Google Earth Engine for global monitoring
                </p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div style="text-align: center;">
                <h3 style="color: #FFD700; margin-bottom: 1rem;">BeeMove - Interactive Map</h3>
                <p>Global pollination monitoring through NASA satellite technology</p>
                <div class="social-links" style="margin-top: 1rem;">
                    <a href="./index.html"><i class="fas fa-home"></i></a>
                    <a href="#"><i class="fab fa-github"></i></a>
                    <a href="#"><i class="fab fa-linkedin"></i></a>
                </div>
            </div>
            
            <div style="border-top: 1px solid #444; padding-top: 2rem; margin-top: 2rem; text-align: center;">
                <p>&copy; 2024 BeeMove - BeeMove Team. NASA Space Apps Challenge 2024.</p>
            </div>
        </div>
    </footer>

    <script src="dashboard-data.js"></script>
    <script>
        // Map Navigation Variables
        let currentZoom = 1;
        let isDragging = false;
        let startX, startY;
        let translateX = 0, translateY = 0;
        let mapContent, mapContainer;
        
        // Initialize map navigation
        function initMapNavigation() {
            mapContent = document.getElementById('mapContent');
            mapContainer = document.getElementById('mapContainer');
            
            // Mouse events for desktop
            mapContainer.addEventListener('mousedown', startDrag);
            mapContainer.addEventListener('mousemove', drag);
            mapContainer.addEventListener('mouseup', endDrag);
            mapContainer.addEventListener('mouseleave', endDrag);
            
            // Touch events for mobile
            mapContainer.addEventListener('touchstart', handleTouchStart, { passive: false });
            mapContainer.addEventListener('touchmove', handleTouchMove, { passive: false });
            mapContainer.addEventListener('touchend', handleTouchEnd);
            
            // Wheel event for zoom
            mapContainer.addEventListener('wheel', handleWheel, { passive: false });
            
            // Double click for auto zoom
            mapContainer.addEventListener('dblclick', handleDoubleClick);
            
            // Prevent context menu
            mapContainer.addEventListener('contextmenu', (e) => e.preventDefault());
        }
        
        // Mouse drag functions
        function startDrag(e) {
            isDragging = true;
            startX = e.clientX - translateX;
            startY = e.clientY - translateY;
            mapContainer.style.cursor = 'grabbing';
        }
        
        function drag(e) {
            if (!isDragging) return;
            e.preventDefault();
            
            translateX = e.clientX - startX;
            translateY = e.clientY - startY;
            
            updateMapTransform();
        }
        
        function endDrag() {
            isDragging = false;
            mapContainer.style.cursor = 'grab';
        }
        
        // Touch functions
        function handleTouchStart(e) {
            e.preventDefault();
            const touch = e.touches[0];
            startDrag({
                clientX: touch.clientX,
                clientY: touch.clientY
            });
        }
        
        function handleTouchMove(e) {
            e.preventDefault();
            if (!isDragging) return;
            
            const touch = e.touches[0];
            drag({
                preventDefault: () => {},
                clientX: touch.clientX,
                clientY: touch.clientY
            });
        }
        
        function handleTouchEnd(e) {
            e.preventDefault();
            endDrag();
        }
        
        // Wheel zoom function
        function handleWheel(e) {
            e.preventDefault();
            
            const delta = e.deltaY > 0 ? -0.1 : 0.1;
            const newZoom = Math.max(0.5, Math.min(3, currentZoom + delta));
            
            if (newZoom !== currentZoom) {
                currentZoom = newZoom;
                updateMapTransform();
                updateZoomLevel();
            }
        }
        
        // Double click zoom function
        function handleDoubleClick(e) {
            e.preventDefault();
            
            if (currentZoom < 2) {
                // Zoom in to 2x at the clicked position
                const rect = mapContainer.getBoundingClientRect();
                const clickX = e.clientX - rect.left - rect.width / 2;
                const clickY = e.clientY - rect.top - rect.height / 2;
                
                translateX = -clickX * 0.5;
                translateY = -clickY * 0.5;
                currentZoom = 2;
            } else {
                // Reset to original view
                resetView();
                return;
            }
            
            updateMapTransform();
            updateZoomLevel();
        }
        
        // Zoom functions
        function zoomIn() {
            if (currentZoom < 3) {
                currentZoom = Math.min(3, currentZoom + 0.2);
                updateMapTransform();
                updateZoomLevel();
            }
        }
        
        function zoomOut() {
            if (currentZoom > 0.5) {
                currentZoom = Math.max(0.5, currentZoom - 0.2);
                updateMapTransform();
                updateZoomLevel();
            }
        }
        
        function resetView() {
            currentZoom = 1;
            translateX = 0;
            translateY = 0;
            updateMapTransform();
            updateZoomLevel();
        }
        
        // Update map transform
        function updateMapTransform() {
            // Enhanced constraints for better navigation
            const containerRect = mapContainer.getBoundingClientRect();
            const contentRect = mapContent.getBoundingClientRect();
            
            // Calculate maximum translation based on zoom and container size
            const maxTranslateX = Math.max(0, (contentRect.width * currentZoom - containerRect.width) / (2 * currentZoom));
            const maxTranslateY = Math.max(0, (contentRect.height * currentZoom - containerRect.height) / (2 * currentZoom));
            
            // Constrain translation
            translateX = Math.max(-maxTranslateX, Math.min(maxTranslateX, translateX));
            translateY = Math.max(-maxTranslateY, Math.min(maxTranslateY, translateY));
            
            // Apply smooth transform to the map content (image + emojis together)
            mapContent.style.transform = `scale(${currentZoom}) translate(${translateX / currentZoom}px, ${translateY / currentZoom}px)`;
            
            // Update cursor based on zoom level
            if (currentZoom > 1) {
                mapContainer.style.cursor = isDragging ? 'grabbing' : 'grab';
            } else {
                mapContainer.style.cursor = 'default';
            }
        }
        
        // Update zoom level display with enhanced info
        function updateZoomLevel() {
            const zoomLevel = document.getElementById('zoomLevel');
            const zoomPercent = Math.round(currentZoom * 100);
            
            let zoomText = `Zoom: ${zoomPercent}%`;
            if (currentZoom >= 3) zoomText += ' (M√°x)';
            else if (currentZoom <= 0.5) zoomText += ' (M√≠n)';
            
            zoomLevel.textContent = zoomText;
        }
        
        // Enhanced reset function with animation
        function resetView() {
            const steps = 20;
            const startZoom = currentZoom;
            const startX = translateX;
            const startY = translateY;
            
            let step = 0;
            const animate = () => {
                step++;
                const progress = step / steps;
                
                // Easing function for smooth animation
                const easeOut = 1 - Math.pow(1 - progress, 3);
                
                currentZoom = startZoom + (1 - startZoom) * easeOut;
                translateX = startX * (1 - easeOut);
                translateY = startY * (1 - easeOut);
                
                updateMapTransform();
                updateZoomLevel();
                
                if (step < steps) {
                    requestAnimationFrame(animate);
                }
            };
            
            animate();
        }
        
        // Initialize map navigation when page loads
        document.addEventListener('DOMContentLoaded', () => {
            initMapNavigation();
        });
        // Initialize dashboard data for map page
        let mapDashboardData = null;
        let mapCharts = {};
        
        function initializeMapDashboard() {
            mapDashboardData = new DashboardData();
            createMapCharts();
            updateMapWeatherData();
            updateMapStatistics();
        }
        
        function generateStationData(stationId) {
            // Generate unique data for each station
            const variations = {
                'station-1': { pollenMult: 1.2, flowerMult: 0.9, rainMult: 1.1, tempAdd: 2 },
                'station-2': { pollenMult: 0.8, flowerMult: 1.3, rainMult: 1.5, tempAdd: 5 },
                'station-3': { pollenMult: 1.1, flowerMult: 1.1, rainMult: 0.7, tempAdd: -3 }
            };
            
            const variation = variations[stationId] || variations['station-1'];
            
            // Modify the base data
            const pollenData = mapDashboardData.getPollenData();
            pollenData.datasets[0].data = pollenData.datasets[0].data.map(val => 
                Math.round(val * variation.pollenMult)
            );
            
            const floweringData = mapDashboardData.getFloweringData();
            floweringData.datasets[0].data = floweringData.datasets[0].data.map(val => 
                Math.min(100, Math.round(val * variation.flowerMult))
            );
            
            const rainData = mapDashboardData.getRainData();
            rainData.datasets[0].data = rainData.datasets[0].data.map(val => 
                Math.round(val * variation.rainMult * 10) / 10
            );
            
            // Update weather data
            const weather = mapDashboardData.getWeatherData();
            weather.temperature.avg += variation.tempAdd;
            weather.temperature.max += variation.tempAdd;
            weather.temperature.min += variation.tempAdd;
        }
        
        function createMapCharts() {
            const baseOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        backgroundColor: 'rgba(15, 20, 25, 0.9)',
                        titleColor: '#FFD700',
                        bodyColor: '#ffffff',
                        borderColor: '#FFD700',
                        borderWidth: 1,
                        cornerRadius: 8,
                        displayColors: false
                    }
                },
                scales: {
                    x: {
                        grid: { color: 'rgba(255, 255, 255, 0.1)' },
                        ticks: { color: '#ffffff', maxTicksLimit: 8 }
                    },
                    y: {
                        grid: { color: 'rgba(255, 255, 255, 0.1)' },
                        ticks: { color: '#ffffff' }
                    }
                }
            };
            
            // Pollen Chart
            const pollenCtx = document.getElementById('mapPollenChart').getContext('2d');
            mapCharts.pollen = new Chart(pollenCtx, {
                type: 'line',
                data: mapDashboardData.getPollenData(),
                options: {
                    ...baseOptions,
                    scales: {
                        ...baseOptions.scales,
                        y: { ...baseOptions.scales.y, beginAtZero: true, max: 600 }
                    }
                }
            });
            
            // Flowering Chart
            const floweringCtx = document.getElementById('mapFloweringChart').getContext('2d');
            mapCharts.flowering = new Chart(floweringCtx, {
                type: 'line',
                data: mapDashboardData.getFloweringData(),
                options: {
                    ...baseOptions,
                    scales: {
                        ...baseOptions.scales,
                        y: { ...baseOptions.scales.y, beginAtZero: true, max: 100 }
                    }
                }
            });
            
            // Rain Chart
            const rainCtx = document.getElementById('mapRainChart').getContext('2d');
            mapCharts.rain = new Chart(rainCtx, {
                type: 'bar',
                data: mapDashboardData.getRainData(),
                options: baseOptions
            });
        }
        
        function updateMapWeatherData() {
            const weather = mapDashboardData.getWeatherData();
            document.getElementById('mapTemp').textContent = `${weather.temperature.avg}¬∞C`;
            document.getElementById('mapHumidity').textContent = `${weather.humidity.avg}%`;
            document.getElementById('mapWind').textContent = `${weather.wind.speed} km/h`;
            document.getElementById('mapPressure').textContent = `${weather.pressure.avg} hPa`;
            document.getElementById('mapUV').textContent = weather.uv.avg;
            document.getElementById('mapVisibility').textContent = `${weather.visibility.avg} km`;
        }
        
        function updateMapStatistics() {
            const pollenStats = mapDashboardData.getPollenStats();
            document.getElementById('mapPollenAvg').textContent = `${pollenStats.average}`;
            document.getElementById('mapPollenMax').textContent = `${pollenStats.max}`;
            
            const statusElement = document.getElementById('mapPollenStatus');
            statusElement.textContent = pollenStats.status;
            
            if (pollenStats.status === 'Alto') {
                statusElement.style.color = '#ff6b6b';
            } else if (pollenStats.status === 'Moderado') {
                statusElement.style.color = '#FFD700';
            } else {
                statusElement.style.color = '#00ff88';
            }
            
            const rainStats = mapDashboardData.getRainStats();
            document.getElementById('mapRainTotal').textContent = `${rainStats.total}mm`;
            document.getElementById('mapRainAvg').textContent = `${rainStats.average}mm`;
        }
    </script>
    <script>
        // Scroll animations for this page
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.info-card').forEach(el => {
            el.classList.add('fade-in');
            observer.observe(el);
        });

        // Dashboard toggle function
        function toggleDashboard(stationId) {
            // Prevent event bubbling and map dragging
            if (event) {
                event.stopPropagation();
                event.preventDefault();
            }
            
            const dashboard = document.getElementById('dashboardContainer');
            const textContent = document.getElementById('textContent');
            const contentSection = document.querySelector('.content-section');
            
            if (dashboard.classList.contains('show')) {
                // Hide dashboard, show text
                dashboard.classList.remove('show');
                textContent.classList.remove('hide');
                
                // Reset all bee emojis
                document.querySelectorAll('.bee-emoji').forEach(bee => {
                    bee.style.transform = 'scale(1)';
                    bee.style.backgroundColor = 'rgba(255, 255, 255, 0.9)';
                });
            } else {
                // Show dashboard, hide text
                dashboard.classList.add('show');
                textContent.classList.add('hide');
                
                // Initialize dashboard if not already done
                if (!mapDashboardData) {
                    setTimeout(() => {
                        initializeMapDashboard();
                        if (stationId) {
                            generateStationData(stationId);
                            updateMapCharts();
                            updateStationHeader(stationId);
                        }
                    }, 500);
                } else {
                    // Update with station-specific data
                    if (stationId) {
                        generateStationData(stationId);
                        updateMapCharts();
                        updateStationHeader(stationId);
                    }
                }
                
                // Highlight clicked bee
                if (event && event.target) {
                    event.target.style.transform = 'scale(1.3)';
                    event.target.style.backgroundColor = 'rgba(255, 215, 0, 0.8)';
                }
                
                // Reset other bees
                document.querySelectorAll('.bee-emoji').forEach(bee => {
                    if (event && bee !== event.target) {
                        bee.style.transform = 'scale(1)';
                        bee.style.backgroundColor = 'rgba(255, 255, 255, 0.9)';
                    }
                });
                
                // Smooth scroll to content section
                setTimeout(() => {
                    contentSection.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });
                }, 300);
            }
        }
        
        function updateMapCharts() {
            if (mapCharts.pollen) {
                mapCharts.pollen.data = mapDashboardData.getPollenData();
                mapCharts.pollen.update('none');
            }
            
            if (mapCharts.flowering) {
                mapCharts.flowering.data = mapDashboardData.getFloweringData();
                mapCharts.flowering.update('none');
            }
            
            if (mapCharts.rain) {
                mapCharts.rain.data = mapDashboardData.getRainData();
                mapCharts.rain.update('none');
            }
            
            updateMapWeatherData();
            updateMapStatistics();
        }
        
        function updateStationHeader(stationId) {
            const stationNames = {
                'station-1': 'SP-001 - S√£o Paulo',
                'station-2': 'RJ-002 - Rio de Janeiro', 
                'station-3': 'MG-003 - Minas Gerais'
            };
            
            const stationName = stationNames[stationId] || 'Esta√ß√£o Desconhecida';
            const headerElement = document.querySelector('.map-dashboard-container h2');
            if (headerElement) {
                headerElement.innerHTML = `üìä Dashboard BeeMove - Esta√ß√£o ${stationName}`;
            }
        }

        // Smooth scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Add click handler to close dashboard when clicking text content
        document.getElementById('textContent').addEventListener('click', function() {
            const dashboard = document.getElementById('dashboardContainer');
            if (dashboard.classList.contains('show')) {
                toggleDashboard();
            }
        });

        // Add pulse animation to bee emojis
        setInterval(() => {
            document.querySelectorAll('.bee-emoji').forEach((bee, index) => {
                setTimeout(() => {
                    if (!bee.style.transform.includes('1.3')) {
                        bee.style.transform = 'scale(1.1)';
                        setTimeout(() => {
                            if (!bee.style.transform.includes('1.3')) {
                                bee.style.transform = 'scale(1)';
                            }
                        }, 200);
                    }
                }, index * 500);
            });
        }, 3000);
    </script>
</body>
</html>
